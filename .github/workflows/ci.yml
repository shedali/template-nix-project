name: CI
on: [push, pull_request]
jobs:
  ci:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v4
    - uses: DeterminateSystems/nix-installer-action@v14
    - uses: cachix/cachix-action@v14
      with:
        name: shedali
        authToken: ${{ secrets.CACHIX_AUTH_TOKEN }}
    - run: nix fmt --accept-flake-config -- --check
    - run: nix build
    - run: nix flake check